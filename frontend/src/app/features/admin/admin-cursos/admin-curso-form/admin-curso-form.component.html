<div class="container mt-4">
  <div class="card">
    <div class="card-header bg-primary text-white">
      <h3>{{ isEdit ? 'Editar Curso' : 'Novo Curso' }}</h3>
    </div>
    <div class="card-body">
      <form [formGroup]="cursoForm" (ngSubmit)="onSubmit()">
        <div class="mb-3">
          <label for="nome" class="form-label">Nome do Curso *</label>
          <input type="text" class="form-control" id="nome" formControlName="nome"
                 [ngClass]="{ 'is-invalid': cursoForm.get('nome')?.invalid && (cursoForm.get('nome')?.dirty || cursoForm.get('nome')?.touched) }">
          <div *ngIf="cursoForm.get('nome')?.invalid && (cursoForm.get('nome')?.dirty || cursoForm.get('nome')?.touched)"
               class="invalid-feedback">
            Nome é obrigatório
          </div>
        </div>

        <div class="mb-3">
          <label for="descricaoDetalhada" class="form-label">Descrição *</label>
          <textarea class="form-control" id="descricaoDetalhada" rows="3" formControlName="descricaoDetalhada"
                   [ngClass]="{ 'is-invalid': cursoForm.get('descricaoDetalhada')?.invalid && (cursoForm.get('descricaoDetalhada')?.dirty || cursoForm.get('descricaoDetalhada')?.touched) }"></textarea>
          <div *ngIf="cursoForm.get('descricaoDetalhada')?.invalid && (cursoForm.get('descricaoDetalhada')?.dirty || cursoForm.get('descricaoDetalhada')?.touched)"
               class="invalid-feedback">
            Descrição é obrigatória
          </div>
        </div>

        <!-- Campo de Categoria -->
        <div class="mb-3">
          <label for="categoria" class="form-label">Categoria de Ensino *</label>
          <p-dropdown [options]="categorias" formControlName="categoria" 
                      placeholder="Selecione uma categoria" [showClear]="true"
                      [ngClass]="{ 'ng-invalid ng-dirty': cursoForm.get('categoria')?.invalid && (cursoForm.get('categoria')?.dirty || cursoForm.get('categoria')?.touched) }">
          </p-dropdown>
          <div *ngIf="cursoForm.get('categoria')?.invalid && (cursoForm.get('categoria')?.dirty || cursoForm.get('categoria')?.touched)"
               class="invalid-feedback">
            Por favor, selecione uma categoria
          </div>
        </div>
        
        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="preco" class="form-label">Valor da propina (Kz) *</label>
            <input type="number" step="0.01" class="form-control" id="preco" formControlName="preco"
                   [ngClass]="{ 'is-invalid': cursoForm.get('preco')?.invalid && (cursoForm.get('preco')?.dirty || cursoForm.get('preco')?.touched) }">
            <div *ngIf="cursoForm.get('preco')?.invalid && (cursoForm.get('preco')?.dirty || cursoForm.get('preco')?.touched)"
                 class="invalid-feedback">
              Preço deve ser um valor positivo
            </div>
          </div>
        </div>

        <div class="d-flex justify-content-end gap-2">
          <button type="button" class="btn btn-secondary" routerLink="/admin/cursos">Cancelar</button>
          <button type="submit" class="btn btn-primary" [disabled]="cursoForm.invalid">
            {{ isEdit ? 'Atualizar' : 'Salvar' }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<p-toast></p-toast>